(window["webpackJsonpmud-frontend"]=window["webpackJsonpmud-frontend"]||[]).push([[0],{100:function(e,t,n){e.exports=n(204)},114:function(e,t,n){},138:function(e,t){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){},204:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(95),s=n.n(a),c=n(35),i=(n(114),n(24)),u=n(99),l=n(10),h=n(11),f=n(13),v=n(12),d=n(14),p=n(96),m=n.n(p),g=n(36),b=n.n(g),y=(n(143),n(144),function(e){return{fontFamily:e.fontFamily,fontSize:e.fontSize}}),S=function(e,t){return o.a.createElement("div",{className:"Screen",style:y(t),ref:e.screenRef},o.a.createElement("p",null,e.buffer))},k=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(a)))).screen=o.a.createRef(),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(){this.screen.current.scrollTop=this.screen.current.scrollHeight}},{key:"render",value:function(){return o.a.createElement(S,{buffer:this.props.buffer,screenRef:this.screen})}}]),t}(r.Component),w=function(e){var t=e.servers.map((function(e){var t=e.host,n=e.port,r=e.name;return o.a.createElement("option",{key:r,value:r},r," - ",t,":",n)}));return o.a.createElement("div",{className:"serverSelect"},o.a.createElement("select",{name:"server",onChange:e.serverSelect},t),o.a.createElement("input",{type:"submit",onClick:e.serverConnect,value:"connect"===e.status?"Disconnect":"Connect"}))},C=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={selectedServer:""},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"onServerConnect",value:function(e){console.log("onServerConnect",e),this.state.selectedServer?this.props.onServerConnect(this.state.selectedServer):this.props.onServerConnect(this.props.servers[0].name)}},{key:"onServerSelect",value:function(e){console.log("onServerSelect",e.target.value),this.setState({selectedServer:e.target.value})}},{key:"render",value:function(){var e=this;return o.a.createElement(w,{serverConnect:function(t){return e.onServerConnect(t)},serverSelect:function(t){return e.onServerSelect(t)},status:this.props.status,servers:this.props.servers})}}]),t}(o.a.Component),E=(n(145),function(e,t){switch(e){case"connecting":return{color:"yellow",status:"Connecting.."};case"error":return{color:"red",status:"Error: ".concat(t.error)};case"connect":return{color:"lightgreen",status:"Connected"};case"close":return{color:"red",status:"Disconnected"};default:return{color:"white",status:e}}}),j=function(e){var t=e.size,n=void 0===t?"1em":t,r=e.color,a=void 0===r?"currentColor":r,s=e.title,c=e.children;return o.a.createElement("svg",{width:n,height:n,viewBox:"0 0 32 32"},o.a.createElement("title",null,s),c,o.a.createElement("style",{jsx:"true"},"\n                svg {\n                    vertical-align: middle;\n                    fill: ".concat(a,";\n                }\n            ")))};j.defaultProps={size:"1em",color:"currentColor"};var O=function(e){return o.a.createElement("div",null,o.a.createElement("span",null,o.a.createElement(j,{title:E(e.status,e.statusData).status,color:E(e.status,e.statusData).color},o.a.createElement("circle",{cx:"16",cy:"16",r:"16"})),E(e.status,e.statusData).status))};O.defaultProps={statusData:{}};var D=O,M=(n(146),function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(a)))).state={value:""},n.history=[],n.cursor=0,n.buffer="",n.input=o.a.createRef(),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.sendMessage(this.state.value),""!==this.state.value&&(this.history=[].concat(Object(i.a)(this.history),[this.state.value]),this.cursor=this.history.length,this.setState({value:""}))}},{key:"handleChange",value:function(e){this.buffer=e.target.value,this.setState({value:e.target.value})}},{key:"updateValue",value:function(){var e=this,t=this.cursor===this.history.length?this.buffer:this.history[this.cursor];this.setState({value:t}),setTimeout((function(){e.input.current.setSelectionRange(0,t.length)}),0)}},{key:"handleKey",value:function(e){switch(e.keyCode){case 38:this.cursor=Math.max(this.cursor-1,0),this.updateValue(),e.preventDefault();break;case 40:this.cursor=Math.min(this.cursor+1,this.history.length),this.updateValue(),e.preventDefault()}}},{key:"render",value:function(){var e=this;return o.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},o.a.createElement("input",{autoFocus:!0,className:"InputBar",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:"false",type:this.props.echo?"text":"password",ref:this.input,value:this.state.value,onChange:function(t){return e.handleChange(t)},onKeyDown:function(t){return e.handleKey(t)}}))}}]),t}(r.Component)),x=n(97),A=n.n(x),N=n(98),P=n.n(N),B=function(e){return o.a.createElement(P.a,{key:b()()},"".concat(e.toString()))},R=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={buffer:[],servers:[],status:"closed",echo:!0,statusData:{}},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.id=this.props.cookies.get("id"),this.id||(this.id=b()(),this.props.cookies.set("id",this.id)),console.log("Client ID: ",this.id);var t=new m.a("".concat("https://mud-api.seanson.website","?token=").concat(this.id));t.on("clientData",(function(t){return e.onData(t)})),t.on("clientControl",(function(t){return e.onControl(t)})),t.on("backLog",(function(t){return e.onBackLog(t)})),t.on("status",(function(t){var n=t.status,r=t.data;return e.onStatus(n,r)})),t.on("servers",(function(t){return e.onServers(t)})),t.on("echo",(function(t){return e.setState({echo:t})})),t.on("GMCP",(function(t){var n=Object(u.a)(t,2),r=n[0],o=n[1];return e.onGMCP(r,o)})),this.socket=t}},{key:"onBackLog",value:function(e){var t=e.map((function(e){return B(e)}));this.setState({buffer:t})}},{key:"onData",value:function(e){this.setState((function(t){return{buffer:[].concat(Object(i.a)(t.buffer),[B(e)])}}))}},{key:"onServers",value:function(e){console.log("onServers",e),this.setState({servers:e})}},{key:"onStatus",value:function(e,t){console.log("onStatus",e,t),this.setState({status:e,statusData:t})}},{key:"onGMCP",value:function(e,t){console.log("onGMCP",e,t)}},{key:"connectServer",value:function(e){console.log("connectServer",e,this.state.status),"connect"!==this.state.status?this.socket.emit("connectServer",e):this.socket.emit("disconnectServer",e)}},{key:"sendMessage",value:function(e){this.state.echo&&this.setState((function(t){return{buffer:[].concat(Object(i.a)(t.buffer),[B("\r\n".concat(e,"\r\n"))])}})),this.socket.emit("send",{clientId:this.state.clientId,message:"".concat(e,"\r\n")})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement("img",{src:A.a,className:"App-logo",alt:"logo"}),this.state.servers.length>0&&o.a.createElement(C,{onServerConnect:function(t){return e.connectServer(t)},servers:this.state.servers,status:this.state.status}),o.a.createElement(D,{status:this.state.status,statusData:this.state.statusData})),o.a.createElement(k,{buffer:this.state.buffer}),o.a.createElement(M,{sendMessage:function(t){return e.sendMessage(t)},echo:this.state.echo}))}}]),t}(r.Component),z=Object(c.withCookies)(R),I=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function L(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(o.a.createElement(c.CookiesProvider,null,o.a.createElement(z,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");I?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):L(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):L(e)}))}}()},97:function(e,t,n){e.exports=n.p+"static/media/logo.978474bc.png"}},[[100,1,2]]]);
//# sourceMappingURL=main.8ee3033a.chunk.js.map